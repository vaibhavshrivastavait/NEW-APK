{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":25,"index":2529}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":25,"index":2529}}],"key":"ohGilxjVqjyE1GooDVDt9OYg9x0="}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":87,"column":25,"index":2529}}],"key":"V6GYoXnblvuuGHJNMy7MHyaunsU="}},{"name":"@babel/runtime/helpers/objectSpread2","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"cO+kR170JcyEW83FKera/I0tgxg="}},{"name":"fbjs/lib/invariant","data":{"asyncType":null,"locs":[{"start":{"line":12,"column":0,"index":301},"end":{"line":12,"column":43,"index":344}}],"key":"avnjoAx2FQYjx6eZ7ALk+OuZk68="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _objectSpread2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/objectSpread2\"));\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"fbjs/lib/invariant\"));\n  /**\n   * Copyright (c) Nicolas Gallagher.\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n  var TaskQueue = /*#__PURE__*/function () {\n    function TaskQueue(_ref) {\n      (0, _classCallCheck2.default)(this, TaskQueue);\n      var onMoreTasks = _ref.onMoreTasks;\n      this._onMoreTasks = onMoreTasks;\n      this._queueStack = [{\n        tasks: [],\n        popable: true\n      }];\n    }\n    return (0, _createClass2.default)(TaskQueue, [{\n      key: \"enqueue\",\n      value: function enqueue(task) {\n        this._getCurrentQueue().push(task);\n      }\n    }, {\n      key: \"enqueueTasks\",\n      value: function enqueueTasks(tasks) {\n        var _this = this;\n        tasks.forEach(function (task) {\n          return _this.enqueue(task);\n        });\n      }\n    }, {\n      key: \"cancelTasks\",\n      value: function cancelTasks(tasksToCancel) {\n        this._queueStack = this._queueStack.map(function (queue) {\n          return (0, _objectSpread2.default)((0, _objectSpread2.default)({}, queue), {}, {\n            tasks: queue.tasks.filter(function (task) {\n              return tasksToCancel.indexOf(task) === -1;\n            })\n          });\n        }).filter(function (queue, idx) {\n          return queue.tasks.length > 0 || idx === 0;\n        });\n      }\n    }, {\n      key: \"hasTasksToProcess\",\n      value: function hasTasksToProcess() {\n        return this._getCurrentQueue().length > 0;\n      }\n\n      /**\n       * Executes the next task in the queue.\n       */\n    }, {\n      key: \"processNext\",\n      value: function processNext() {\n        var queue = this._getCurrentQueue();\n        if (queue.length) {\n          var task = queue.shift();\n          try {\n            if (typeof task === 'object' && task.gen) {\n              this._genPromise(task);\n            } else if (typeof task === 'object' && task.run) {\n              task.run();\n            } else {\n              (0, _invariant.default)(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\\n' + JSON.stringify(task, null, 2));\n              task();\n            }\n          } catch (e) {\n            e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;\n            throw e;\n          }\n        }\n      }\n    }, {\n      key: \"_getCurrentQueue\",\n      value: function _getCurrentQueue() {\n        var stackIdx = this._queueStack.length - 1;\n        var queue = this._queueStack[stackIdx];\n        if (queue.popable && queue.tasks.length === 0 && stackIdx > 0) {\n          this._queueStack.pop();\n          return this._getCurrentQueue();\n        } else {\n          return queue.tasks;\n        }\n      }\n    }, {\n      key: \"_genPromise\",\n      value: function _genPromise(task) {\n        var _this2 = this;\n        var length = this._queueStack.push({\n          tasks: [],\n          popable: false\n        });\n        var stackIdx = length - 1;\n        var stackItem = this._queueStack[stackIdx];\n        task.gen().then(function () {\n          stackItem.popable = true;\n          _this2.hasTasksToProcess() && _this2._onMoreTasks();\n        }).catch(function (ex) {\n          setTimeout(function () {\n            ex.message = \"TaskQueue: Error resolving Promise in task \" + task.name + \": \" + ex.message;\n            throw ex;\n          }, 0);\n        });\n      }\n    }]);\n  }();\n  var _default = exports.default = TaskQueue;\n});","lineCount":121,"map":[[9,2,1,0],[9,6,1,0,"_objectSpread2"],[9,20,1,0],[9,23,1,0,"_interopRequireDefault"],[9,45,1,0],[9,46,1,0,"_$$_REQUIRE"],[9,57,1,0],[9,58,1,0,"_dependencyMap"],[9,72,1,0],[10,2,12,0],[10,6,12,0,"_invariant"],[10,16,12,0],[10,19,12,0,"_interopRequireDefault"],[10,41,12,0],[10,42,12,0,"_$$_REQUIRE"],[10,53,12,0],[10,54,12,0,"_dependencyMap"],[10,68,12,0],[11,2,2,0],[12,0,3,0],[13,0,4,0],[14,0,5,0],[15,0,6,0],[16,0,7,0],[17,0,8,0],[18,0,9,0],[19,0,10,0],[20,2,2,0],[20,6,13,6,"TaskQueue"],[20,15,13,15],[21,4,14,2],[21,13,14,2,"TaskQueue"],[21,23,14,14,"_ref"],[21,27,14,18],[21,29,14,20],[22,6,14,20],[22,10,14,20,"_classCallCheck2"],[22,26,14,20],[22,27,14,20,"default"],[22,34,14,20],[22,42,14,20,"TaskQueue"],[22,51,14,20],[23,6,15,4],[23,10,15,8,"onMoreTasks"],[23,21,15,19],[23,24,15,22,"_ref"],[23,28,15,26],[23,29,15,27,"onMoreTasks"],[23,40,15,38],[24,6,16,4],[24,10,16,8],[24,11,16,9,"_onMoreTasks"],[24,23,16,21],[24,26,16,24,"onMoreTasks"],[24,37,16,35],[25,6,17,4],[25,10,17,8],[25,11,17,9,"_queueStack"],[25,22,17,20],[25,25,17,23],[25,26,17,24],[26,8,18,6,"tasks"],[26,13,18,11],[26,15,18,13],[26,17,18,15],[27,8,19,6,"popable"],[27,15,19,13],[27,17,19,15],[28,6,20,4],[28,7,20,5],[28,8,20,6],[29,4,21,2],[30,4,21,3],[30,15,21,3,"_createClass2"],[30,28,21,3],[30,29,21,3,"default"],[30,36,21,3],[30,38,21,3,"TaskQueue"],[30,47,21,3],[31,6,21,3,"key"],[31,9,21,3],[32,6,21,3,"value"],[32,11,21,3],[32,13,22,2],[32,22,22,2,"enqueue"],[32,29,22,9,"enqueue"],[32,30,22,10,"task"],[32,34,22,14],[32,36,22,16],[33,8,23,4],[33,12,23,8],[33,13,23,9,"_getCurrentQueue"],[33,29,23,25],[33,30,23,26],[33,31,23,27],[33,32,23,28,"push"],[33,36,23,32],[33,37,23,33,"task"],[33,41,23,37],[33,42,23,38],[34,6,24,2],[35,4,24,3],[36,6,24,3,"key"],[36,9,24,3],[37,6,24,3,"value"],[37,11,24,3],[37,13,25,2],[37,22,25,2,"enqueueTasks"],[37,34,25,14,"enqueueTasks"],[37,35,25,15,"tasks"],[37,40,25,20],[37,42,25,22],[38,8,25,22],[38,12,25,22,"_this"],[38,17,25,22],[39,8,26,4,"tasks"],[39,13,26,9],[39,14,26,10,"forEach"],[39,21,26,17],[39,22,26,18],[39,32,26,18,"task"],[39,36,26,22],[40,10,26,22],[40,17,26,26,"_this"],[40,22,26,30],[40,23,26,31,"enqueue"],[40,30,26,38],[40,31,26,39,"task"],[40,35,26,43],[40,36,26,44],[41,8,26,44],[41,10,26,45],[42,6,27,2],[43,4,27,3],[44,6,27,3,"key"],[44,9,27,3],[45,6,27,3,"value"],[45,11,27,3],[45,13,28,2],[45,22,28,2,"cancelTasks"],[45,33,28,13,"cancelTasks"],[45,34,28,14,"tasksToCancel"],[45,47,28,27],[45,49,28,29],[46,8,29,4],[46,12,29,8],[46,13,29,9,"_queueStack"],[46,24,29,20],[46,27,29,23],[46,31,29,27],[46,32,29,28,"_queueStack"],[46,43,29,39],[46,44,29,40,"map"],[46,47,29,43],[46,48,29,44],[46,58,29,44,"queue"],[46,63,29,49],[47,10,29,49],[47,17,29,53],[47,21,29,53,"_objectSpread"],[47,43,29,66],[47,45,29,67],[47,49,29,67,"_objectSpread"],[47,71,29,80],[47,73,29,81],[47,74,29,82],[47,75,29,83],[47,77,29,85,"queue"],[47,82,29,90],[47,83,29,91],[47,85,29,93],[47,86,29,94],[47,87,29,95],[47,89,29,97],[48,12,30,6,"tasks"],[48,17,30,11],[48,19,30,13,"queue"],[48,24,30,18],[48,25,30,19,"tasks"],[48,30,30,24],[48,31,30,25,"filter"],[48,37,30,31],[48,38,30,32],[48,48,30,32,"task"],[48,52,30,36],[49,14,30,36],[49,21,30,40,"tasksToCancel"],[49,34,30,53],[49,35,30,54,"indexOf"],[49,42,30,61],[49,43,30,62,"task"],[49,47,30,66],[49,48,30,67],[49,53,30,72],[49,54,30,73],[49,55,30,74],[50,12,30,74],[51,10,31,4],[51,11,31,5],[51,12,31,6],[52,8,31,6],[52,10,31,7],[52,11,31,8,"filter"],[52,17,31,14],[52,18,31,15],[52,28,31,16,"queue"],[52,33,31,21],[52,35,31,23,"idx"],[52,38,31,26],[53,10,31,26],[53,17,31,31,"queue"],[53,22,31,36],[53,23,31,37,"tasks"],[53,28,31,42],[53,29,31,43,"length"],[53,35,31,49],[53,38,31,52],[53,39,31,53],[53,43,31,57,"idx"],[53,46,31,60],[53,51,31,65],[53,52,31,66],[54,8,31,66],[54,10,31,67],[55,6,32,2],[56,4,32,3],[57,6,32,3,"key"],[57,9,32,3],[58,6,32,3,"value"],[58,11,32,3],[58,13,33,2],[58,22,33,2,"hasTasksToProcess"],[58,39,33,19,"hasTasksToProcess"],[58,40,33,19],[58,42,33,22],[59,8,34,4],[59,15,34,11],[59,19,34,15],[59,20,34,16,"_getCurrentQueue"],[59,36,34,32],[59,37,34,33],[59,38,34,34],[59,39,34,35,"length"],[59,45,34,41],[59,48,34,44],[59,49,34,45],[60,6,35,2],[62,6,37,2],[63,0,38,0],[64,0,39,0],[65,4,37,2],[66,6,37,2,"key"],[66,9,37,2],[67,6,37,2,"value"],[67,11,37,2],[67,13,40,2],[67,22,40,2,"processNext"],[67,33,40,13,"processNext"],[67,34,40,13],[67,36,40,16],[68,8,41,4],[68,12,41,8,"queue"],[68,17,41,13],[68,20,41,16],[68,24,41,20],[68,25,41,21,"_getCurrentQueue"],[68,41,41,37],[68,42,41,38],[68,43,41,39],[69,8,42,4],[69,12,42,8,"queue"],[69,17,42,13],[69,18,42,14,"length"],[69,24,42,20],[69,26,42,22],[70,10,43,6],[70,14,43,10,"task"],[70,18,43,14],[70,21,43,17,"queue"],[70,26,43,22],[70,27,43,23,"shift"],[70,32,43,28],[70,33,43,29],[70,34,43,30],[71,10,44,6],[71,14,44,10],[72,12,45,8],[72,16,45,12],[72,23,45,19,"task"],[72,27,45,23],[72,32,45,28],[72,40,45,36],[72,44,45,40,"task"],[72,48,45,44],[72,49,45,45,"gen"],[72,52,45,48],[72,54,45,50],[73,14,46,10],[73,18,46,14],[73,19,46,15,"_genPromise"],[73,30,46,26],[73,31,46,27,"task"],[73,35,46,31],[73,36,46,32],[74,12,47,8],[74,13,47,9],[74,19,47,15],[74,23,47,19],[74,30,47,26,"task"],[74,34,47,30],[74,39,47,35],[74,47,47,43],[74,51,47,47,"task"],[74,55,47,51],[74,56,47,52,"run"],[74,59,47,55],[74,61,47,57],[75,14,48,10,"task"],[75,18,48,14],[75,19,48,15,"run"],[75,22,48,18],[75,23,48,19],[75,24,48,20],[76,12,49,8],[76,13,49,9],[76,19,49,15],[77,14,50,10],[77,18,50,10,"invariant"],[77,36,50,19],[77,38,50,20],[77,45,50,27,"task"],[77,49,50,31],[77,54,50,36],[77,64,50,46],[77,66,50,48],[77,125,50,107],[77,128,50,110,"JSON"],[77,132,50,114],[77,133,50,115,"stringify"],[77,142,50,124],[77,143,50,125,"task"],[77,147,50,129],[77,149,50,131],[77,153,50,135],[77,155,50,137],[77,156,50,138],[77,157,50,139],[77,158,50,140],[78,14,51,10,"task"],[78,18,51,14],[78,19,51,15],[78,20,51,16],[79,12,52,8],[80,10,53,6],[80,11,53,7],[80,12,53,8],[80,19,53,15,"e"],[80,20,53,16],[80,22,53,18],[81,12,54,8,"e"],[81,13,54,9],[81,14,54,10,"message"],[81,21,54,17],[81,24,54,20],[81,53,54,49],[81,57,54,53,"task"],[81,61,54,57],[81,62,54,58,"name"],[81,66,54,62],[81,70,54,66],[81,72,54,68],[81,73,54,69],[81,76,54,72],[81,80,54,76],[81,83,54,79,"e"],[81,84,54,80],[81,85,54,81,"message"],[81,92,54,88],[82,12,55,8],[82,18,55,14,"e"],[82,19,55,15],[83,10,56,6],[84,8,57,4],[85,6,58,2],[86,4,58,3],[87,6,58,3,"key"],[87,9,58,3],[88,6,58,3,"value"],[88,11,58,3],[88,13,59,2],[88,22,59,2,"_getCurrentQueue"],[88,38,59,18,"_getCurrentQueue"],[88,39,59,18],[88,41,59,21],[89,8,60,4],[89,12,60,8,"stackIdx"],[89,20,60,16],[89,23,60,19],[89,27,60,23],[89,28,60,24,"_queueStack"],[89,39,60,35],[89,40,60,36,"length"],[89,46,60,42],[89,49,60,45],[89,50,60,46],[90,8,61,4],[90,12,61,8,"queue"],[90,17,61,13],[90,20,61,16],[90,24,61,20],[90,25,61,21,"_queueStack"],[90,36,61,32],[90,37,61,33,"stackIdx"],[90,45,61,41],[90,46,61,42],[91,8,62,4],[91,12,62,8,"queue"],[91,17,62,13],[91,18,62,14,"popable"],[91,25,62,21],[91,29,62,25,"queue"],[91,34,62,30],[91,35,62,31,"tasks"],[91,40,62,36],[91,41,62,37,"length"],[91,47,62,43],[91,52,62,48],[91,53,62,49],[91,57,62,53,"stackIdx"],[91,65,62,61],[91,68,62,64],[91,69,62,65],[91,71,62,67],[92,10,63,6],[92,14,63,10],[92,15,63,11,"_queueStack"],[92,26,63,22],[92,27,63,23,"pop"],[92,30,63,26],[92,31,63,27],[92,32,63,28],[93,10,64,6],[93,17,64,13],[93,21,64,17],[93,22,64,18,"_getCurrentQueue"],[93,38,64,34],[93,39,64,35],[93,40,64,36],[94,8,65,4],[94,9,65,5],[94,15,65,11],[95,10,66,6],[95,17,66,13,"queue"],[95,22,66,18],[95,23,66,19,"tasks"],[95,28,66,24],[96,8,67,4],[97,6,68,2],[98,4,68,3],[99,6,68,3,"key"],[99,9,68,3],[100,6,68,3,"value"],[100,11,68,3],[100,13,69,2],[100,22,69,2,"_genPromise"],[100,33,69,13,"_genPromise"],[100,34,69,14,"task"],[100,38,69,18],[100,40,69,20],[101,8,69,20],[101,12,69,20,"_this2"],[101,18,69,20],[102,8,70,4],[102,12,70,8,"length"],[102,18,70,14],[102,21,70,17],[102,25,70,21],[102,26,70,22,"_queueStack"],[102,37,70,33],[102,38,70,34,"push"],[102,42,70,38],[102,43,70,39],[103,10,71,6,"tasks"],[103,15,71,11],[103,17,71,13],[103,19,71,15],[104,10,72,6,"popable"],[104,17,72,13],[104,19,72,15],[105,8,73,4],[105,9,73,5],[105,10,73,6],[106,8,74,4],[106,12,74,8,"stackIdx"],[106,20,74,16],[106,23,74,19,"length"],[106,29,74,25],[106,32,74,28],[106,33,74,29],[107,8,75,4],[107,12,75,8,"stackItem"],[107,21,75,17],[107,24,75,20],[107,28,75,24],[107,29,75,25,"_queueStack"],[107,40,75,36],[107,41,75,37,"stackIdx"],[107,49,75,45],[107,50,75,46],[108,8,76,4,"task"],[108,12,76,8],[108,13,76,9,"gen"],[108,16,76,12],[108,17,76,13],[108,18,76,14],[108,19,76,15,"then"],[108,23,76,19],[108,24,76,20],[108,36,76,26],[109,10,77,6,"stackItem"],[109,19,77,15],[109,20,77,16,"popable"],[109,27,77,23],[109,30,77,26],[109,34,77,30],[110,10,78,6,"_this2"],[110,16,78,10],[110,17,78,11,"hasTasksToProcess"],[110,34,78,28],[110,35,78,29],[110,36,78,30],[110,40,78,34,"_this2"],[110,46,78,38],[110,47,78,39,"_onMoreTasks"],[110,59,78,51],[110,60,78,52],[110,61,78,53],[111,8,79,4],[111,9,79,5],[111,10,79,6],[111,11,79,7,"catch"],[111,16,79,12],[111,17,79,13],[111,27,79,13,"ex"],[111,29,79,15],[111,31,79,19],[112,10,80,6,"setTimeout"],[112,20,80,16],[112,21,80,17],[112,33,80,23],[113,12,81,8,"ex"],[113,14,81,10],[113,15,81,11,"message"],[113,22,81,18],[113,25,81,21],[113,70,81,66],[113,73,81,69,"task"],[113,77,81,73],[113,78,81,74,"name"],[113,82,81,78],[113,85,81,81],[113,89,81,85],[113,92,81,88,"ex"],[113,94,81,90],[113,95,81,91,"message"],[113,102,81,98],[114,12,82,8],[114,18,82,14,"ex"],[114,20,82,16],[115,10,83,6],[115,11,83,7],[115,13,83,9],[115,14,83,10],[115,15,83,11],[116,8,84,4],[116,9,84,5],[116,10,84,6],[117,6,85,2],[118,4,85,3],[119,2,85,3],[120,2,85,3],[120,6,85,3,"_default"],[120,14,85,3],[120,17,85,3,"exports"],[120,24,85,3],[120,25,85,3,"default"],[120,32,85,3],[120,35,87,15,"TaskQueue"],[120,44,87,24],[121,0,87,24]],"functionMap":{"names":["<global>","TaskQueue","constructor","enqueue","enqueueTasks","tasks.forEach$argument_0","cancelTasks","_queueStack.map$argument_0","queue.tasks.filter$argument_0","_queueStack.map.filter$argument_0","hasTasksToProcess","processNext","_getCurrentQueue","_genPromise","task.gen.then$argument_0","task.gen.then._catch$argument_0","setTimeout$argument_0"],"mappings":"AAA;ACY;ECC;GDO;EEC;GFE;EGC;kBCC,0BD;GHC;EKC;4CCC;gCCC,0CD;MDC,SG,mDH;GLC;ESC;GTE;EUK;GVkB;EWC;GXS;EYC;oBCO;KDG,QE;iBCC;ODG;KFC;GZC;CDC"}},"type":"js/module"}]}