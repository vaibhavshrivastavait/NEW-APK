{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":45,"column":43,"index":1900}}],"key":"7kvm5yrOpz4NYiDi6sn4qxa8DVQ="}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":45,"column":43,"index":1900}}],"key":"8I802z/QkQYw0PV6ZCqhBNDwn0Q="}},{"name":"@babel/runtime/helpers/objectWithoutProperties","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":45,"column":43,"index":1900}}],"key":"l9ek7s8G7hY7pJY4P1vxwsk0NPM="}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":45,"column":43,"index":1900}}],"key":"EU+qeBIKi4KcIzPeK4PbkLqFqVY="}},{"name":"react","data":{"asyncType":null,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"a4EMkKqamYWCMMPV7UeQlqGQ+ks="}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _asyncToGenerator2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _objectWithoutProperties2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/objectWithoutProperties\"));\n  var _slicedToArray2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/slicedToArray\"));\n  var _react = _$$_REQUIRE(_dependencyMap[4], \"react\");\n  var _excluded = [\"get\", \"request\"];\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    var isMounted = (0, _react.useRef)(true);\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n    var _ref = options || {},\n      _ref$get = _ref.get,\n      get = _ref$get === void 0 ? true : _ref$get,\n      _ref$request = _ref.request,\n      request = _ref$request === void 0 ? false : _ref$request,\n      permissionOptions = (0, _objectWithoutProperties2.default)(_ref, _excluded);\n    var getPermission = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var response = yield methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }), [methods.getMethod]);\n    var requestPermission = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var response = yield methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }), [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return function () {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return function (options) {\n      return usePermission(methods, options);\n    };\n  }\n});","lineCount":61,"map":[[10,2,1,0],[10,6,1,0,"_react"],[10,12,1,0],[10,15,1,0,"_$$_REQUIRE"],[10,26,1,0],[10,27,1,0,"_dependencyMap"],[10,41,1,0],[11,2,1,65],[11,6,1,65,"_excluded"],[11,15,1,65],[12,2,2,0],[13,0,3,0],[14,0,4,0],[15,0,5,0],[16,0,6,0],[17,2,7,0],[17,11,7,9,"usePermission"],[17,24,7,22,"usePermission"],[17,25,7,23,"methods"],[17,32,7,30],[17,34,7,32,"options"],[17,41,7,39],[17,43,7,41],[18,4,8,4],[18,8,8,10,"isMounted"],[18,17,8,19],[18,20,8,22],[18,24,8,22,"useRef"],[18,37,8,28],[18,39,8,29],[18,43,8,33],[18,44,8,34],[19,4,9,4],[19,8,9,4,"_useState"],[19,17,9,4],[19,20,9,32],[19,24,9,32,"useState"],[19,39,9,40],[19,41,9,41],[19,45,9,45],[19,46,9,46],[20,6,9,46,"_useState2"],[20,16,9,46],[20,23,9,46,"_slicedToArray2"],[20,38,9,46],[20,39,9,46,"default"],[20,46,9,46],[20,48,9,46,"_useState"],[20,57,9,46],[21,6,9,11,"status"],[21,12,9,17],[21,15,9,17,"_useState2"],[21,25,9,17],[22,6,9,19,"setStatus"],[22,15,9,28],[22,18,9,28,"_useState2"],[22,28,9,28],[23,4,10,4],[23,8,10,4,"_ref"],[23,12,10,4],[23,15,10,66,"options"],[23,22,10,73],[23,26,10,77],[23,27,10,78],[23,28,10,79],[24,6,10,79,"_ref$get"],[24,14,10,79],[24,17,10,79,"_ref"],[24,21,10,79],[24,22,10,12,"get"],[24,25,10,15],[25,6,10,12,"get"],[25,9,10,15],[25,12,10,15,"_ref$get"],[25,20,10,15],[25,34,10,18],[25,38,10,22],[25,41,10,22,"_ref$get"],[25,49,10,22],[26,6,10,22,"_ref$request"],[26,18,10,22],[26,21,10,22,"_ref"],[26,25,10,22],[26,26,10,24,"request"],[26,33,10,31],[27,6,10,24,"request"],[27,13,10,31],[27,16,10,31,"_ref$request"],[27,28,10,31],[27,42,10,34],[27,47,10,39],[27,50,10,39,"_ref$request"],[27,62,10,39],[28,6,10,44,"permissionOptions"],[28,23,10,61],[28,30,10,61,"_objectWithoutProperties2"],[28,55,10,61],[28,56,10,61,"default"],[28,63,10,61],[28,65,10,61,"_ref"],[28,69,10,61],[28,71,10,61,"_excluded"],[28,80,10,61],[29,4,11,4],[29,8,11,10,"getPermission"],[29,21,11,23],[29,24,11,26],[29,28,11,26,"useCallback"],[29,46,11,37],[29,65,11,37,"_asyncToGenerator2"],[29,83,11,37],[29,84,11,37,"default"],[29,91,11,37],[29,93,11,38],[29,106,11,50],[30,6,12,8],[30,10,12,14,"response"],[30,18,12,22],[30,27,12,31,"methods"],[30,34,12,38],[30,35,12,39,"getMethod"],[30,44,12,48],[30,45,12,49,"Object"],[30,51,12,55],[30,52,12,56,"keys"],[30,56,12,60],[30,57,12,61,"permissionOptions"],[30,74,12,78],[30,75,12,79],[30,76,12,80,"length"],[30,82,12,86],[30,85,12,89],[30,86,12,90],[30,89,12,93,"permissionOptions"],[30,106,12,110],[30,109,12,113,"undefined"],[30,118,12,122],[30,119,12,123],[31,6,13,8],[31,10,13,12,"isMounted"],[31,19,13,21],[31,20,13,22,"current"],[31,27,13,29],[31,29,14,12,"setStatus"],[31,38,14,21],[31,39,14,22,"response"],[31,47,14,30],[31,48,14,31],[32,6,15,8],[32,13,15,15,"response"],[32,21,15,23],[33,4,16,4],[33,5,16,5],[33,8,16,7],[33,9,16,8,"methods"],[33,16,16,15],[33,17,16,16,"getMethod"],[33,26,16,25],[33,27,16,26],[33,28,16,27],[34,4,17,4],[34,8,17,10,"requestPermission"],[34,25,17,27],[34,28,17,30],[34,32,17,30,"useCallback"],[34,50,17,41],[34,69,17,41,"_asyncToGenerator2"],[34,87,17,41],[34,88,17,41,"default"],[34,95,17,41],[34,97,17,42],[34,110,17,54],[35,6,18,8],[35,10,18,14,"response"],[35,18,18,22],[35,27,18,31,"methods"],[35,34,18,38],[35,35,18,39,"requestMethod"],[35,48,18,52],[35,49,18,53,"Object"],[35,55,18,59],[35,56,18,60,"keys"],[35,60,18,64],[35,61,18,65,"permissionOptions"],[35,78,18,82],[35,79,18,83],[35,80,18,84,"length"],[35,86,18,90],[35,89,18,93],[35,90,18,94],[35,93,18,97,"permissionOptions"],[35,110,18,114],[35,113,18,117,"undefined"],[35,122,18,126],[35,123,18,127],[36,6,19,8],[36,10,19,12,"isMounted"],[36,19,19,21],[36,20,19,22,"current"],[36,27,19,29],[36,29,20,12,"setStatus"],[36,38,20,21],[36,39,20,22,"response"],[36,47,20,30],[36,48,20,31],[37,6,21,8],[37,13,21,15,"response"],[37,21,21,23],[38,4,22,4],[38,5,22,5],[38,8,22,7],[38,9,22,8,"methods"],[38,16,22,15],[38,17,22,16,"requestMethod"],[38,30,22,29],[38,31,22,30],[38,32,22,31],[39,4,23,4],[39,8,23,4,"useEffect"],[39,24,23,13],[39,26,23,14],[39,35,23,23,"runMethods"],[39,45,23,33,"runMethods"],[39,46,23,33],[39,48,23,36],[40,6,24,8],[40,10,24,12,"request"],[40,17,24,19],[40,19,25,12,"requestPermission"],[40,36,25,29],[40,37,25,30],[40,38,25,31],[41,6,26,8],[41,10,26,12],[41,11,26,13,"request"],[41,18,26,20],[41,22,26,24,"get"],[41,25,26,27],[41,27,27,12,"getPermission"],[41,40,27,25],[41,41,27,26],[41,42,27,27],[42,4,28,4],[42,5,28,5],[42,7,28,7],[42,8,28,8,"get"],[42,11,28,11],[42,13,28,13,"request"],[42,20,28,20],[42,22,28,22,"requestPermission"],[42,39,28,39],[42,41,28,41,"getPermission"],[42,54,28,54],[42,55,28,55],[42,56,28,56],[43,4,29,4],[44,4,30,4],[44,8,30,4,"useEffect"],[44,24,30,13],[44,26,30,14],[44,35,30,23,"didMount"],[44,43,30,31,"didMount"],[44,44,30,31],[44,46,30,34],[45,6,31,8,"isMounted"],[45,15,31,17],[45,16,31,18,"current"],[45,23,31,25],[45,26,31,28],[45,30,31,32],[46,6,32,8],[46,13,32,15],[46,25,32,21],[47,8,33,12,"isMounted"],[47,17,33,21],[47,18,33,22,"current"],[47,25,33,29],[47,28,33,32],[47,33,33,37],[48,6,34,8],[48,7,34,9],[49,4,35,4],[49,5,35,5],[49,7,35,7],[49,9,35,9],[49,10,35,10],[50,4,36,4],[50,11,36,11],[50,12,36,12,"status"],[50,18,36,18],[50,20,36,20,"requestPermission"],[50,37,36,37],[50,39,36,39,"getPermission"],[50,52,36,52],[50,53,36,53],[51,2,37,0],[52,2,38,0],[53,0,39,0],[54,0,40,0],[55,0,41,0],[56,2,42,7],[56,11,42,16,"createPermissionHook"],[56,31,42,36,"createPermissionHook"],[56,32,42,37,"methods"],[56,39,42,44],[56,41,42,46],[57,4,43,4],[57,11,43,11],[57,21,43,12,"options"],[57,28,43,19],[58,6,43,19],[58,13,43,24,"usePermission"],[58,26,43,37],[58,27,43,38,"methods"],[58,34,43,45],[58,36,43,47,"options"],[58,43,43,54],[58,44,43,55],[59,4,43,55],[60,2,44,0],[61,0,44,1]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACM;sCCI;KDK;0CEC;KFK;cGC;KHK;cIE;eCE;SDE;KJC;CDE;OOK;WDC,4CC;CPC"}},"type":"js/module"}]}